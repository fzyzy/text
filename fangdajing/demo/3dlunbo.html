<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			*{
				margin:0;
				padding:0;
			}
			body{
				
			}
			#outer{
				position:relative;
				width:640px;
				height:400px;
				margin:100px auto 0;
				transform-style:preserve-3d;
				perspective:1000px;
			}
			#outer .box{
				position:absolute;
				top:0;
				width:80px;
				height:100%;
				transform-style:preserve-3d;
			}
			#outer .box .pieces{
				position:absolute;
				left:0;
				top:0;
				width:100%;
				height:100%;
			}
		</style>
	</head>
	<body>
		<div id="outer">
			<div class="box">
				<div class="pieces"></div>
				<div class="pieces"></div>
				<div class="pieces"></div>
				<div class="pieces"></div>
			</div>
			<div class="box">
				<div class="pieces"></div>
				<div class="pieces"></div>
				<div class="pieces"></div>
				<div class="pieces"></div>
			</div>
			<div class="box">
				<div class="pieces"></div>
				<div class="pieces"></div>
				<div class="pieces"></div>
				<div class="pieces"></div>
			</div>
			<div class="box">
				<div class="pieces"></div>
				<div class="pieces"></div>
				<div class="pieces"></div>
				<div class="pieces"></div>
			</div>
			<div class="box">
				<div class="pieces"></div>
				<div class="pieces"></div>
				<div class="pieces"></div>
				<div class="pieces"></div>
			</div>
			<div class="box">
				<div class="pieces"></div>
				<div class="pieces"></div>
				<div class="pieces"></div>
				<div class="pieces"></div>
			</div>
			<div class="box">
				<div class="pieces"></div>
				<div class="pieces"></div>
				<div class="pieces"></div>
				<div class="pieces"></div>
			</div>
			<div class="box">
				<div class="pieces"></div>
				<div class="pieces"></div>
				<div class="pieces"></div>
				<div class="pieces"></div>
			</div>
		</div>
		<script>
			var oBox = document.getElementsByClassName("box");
			for(var i=0;i<oBox.length;i++){
				var pieces = oBox[i].getElementsByClassName("pieces");
				oBox[i].style.transition = "all 1s "+(i*0.1)+"s";
				oBox[i].style.left = (i*79)+"px";
				for(var j=0;j<pieces.length;j++){
					pieces[j].style.cssText = "transform:rotateX("+(90*j)+"deg) translateZ(200px);background:url(img/pic"+(j+1)+".jpg) "+(-i*80)+"px 0px;";
				}
			}
			var page = 0;
			var time = setInterval(pageChange,3000);
			function pageChange(){
				page++;
				move(page);
			}
			function move(nowPage){
				for(var i=0;i<oBox.length;i++){
					oBox[i].style.transform = "rotateX("+(90*nowPage)+"deg)";
				}
			}
//			浏览器当前页面失去焦点的时候 计时器会被缓存下来 但是不会渲染改变页面  当重新获取焦点的时候 计时器会跑乱  以下就是解决方法
			window.onblur = function(){
				clearInterval(time);
			}
			window.onfocus = function(){
				time = setInterval(pageChange,3000);
			}
		</script>
	</body>
</html>
